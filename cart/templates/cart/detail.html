{% extends 'base.html' %}
{% load static %}
{% block content %}
  <h1 style="color: var(--general-site-color);">–ö–æ—Ä–∑–∏–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤</h1>
  <div id="cart_text">
    <!-- for js -->
  </div>
  {% if cart|length > 0 %}
    <table class="cart_table">
      <thead>
        <tr>
          <th>–ü–∏–∫—á–∞</th>
          <th>–¢–æ–≤–∞—Ä</th>
          <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
          <th>–û–±—â–∞—è —Ü–µ–Ω–∞</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for item in cart %}
          {% with product=item.product %}
            <tr class="cart_product" style="vertical-align: middle; ">
              <td>
                <a href="{{ product.get_absolute_url }}">
                  <img
                    src="{% if product.image %}/static/images/{{ product.image }}{% else %}/static/images/site_images/anon.png{% endif %}"
                    style="height: 50px;width:50px;">
                </a>
              </td>
              <td>{{ product.name }}</td>
              <td>{{ item.quantity }}</td>
              <!-- <td class="num" >{{ item.price }}<div class="currency"
                style="color:var(--officer-site-color);">‚ÇΩ</div>
              </td> -->
              <td class="num">
                {{ item.total_price }}‚ÇΩ
                <!-- <div class="currency" style="color:var(--officer-site-color);">‚ÇΩ</div> -->
              </td>
              <td><a data-product-slug="{{ product.slug }}" class="remove_cart_product">
                <img src="{% static 'images/site_images/delete_item_cross.svg' %}" alt="delete_product"
                    style="width: 40px;height:40px">
              </a></td>
            </tr>
          {% endwith %}
        {% endfor %}
          <tr class="total" style="margin-top: 20px;">

            <td>–í—Å–µ–≥–æ</td>
            <td class="total_price" style="display: flex;">{{ cart.get_total_price }}<div class="currency"
                style="color:var(--officer-site-color);">‚ÇΩ</div>
            </td>
          </tr>
      </tbody>
    </table>
  {% else %}
    <span style="font-size: 22px;">
      –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞üò¢
    </span>
  {% endif %}
  <p class="buttons" style="margin-top: 50px;">
    <button class="button light" style="margin-right: 10px;" onclick="location.href=`{% url 'catalog:catalog_page' %}`">
      –í –∫–∞—Ç–∞–ª–æ–≥
    </button>
    {% if cart|length > 0 %}
      {% if request.user.is_authenticated %}
        <button id="create_order" style="margin-right: 10px;" class="button"
          onclick="location.href=`{% url 'order:create' %}`">
          –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
        </button>
      {% else %}
        <button id="create_order" style="margin-right: 10px;" class="button light" onclick="location.href=`{% url 'accounts:login' %}`">
          –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        </button>
        <!-- <a href="{% url 'accounts:login' %}" class="button" id="create_order">–ù–µ–æ–±—Ö–æ–¥–∏–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a> -->
      {% endif %}

    {% endif %}
  </p>

  <script type="module" src="{% static 'js/cart_scripts.js' %}"></script>
{% endblock %}